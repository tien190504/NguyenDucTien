---
import ThemeToggle from "./ThemeToggle.astro";

const base = import.meta.env.BASE_URL;
const links = [
  { href: `${base}`, label: "Home" },
  { href: `${base}projects/`, label: "Projects" },
  { href: `${base}blog/`, label: "Blog" },
  { href: `${base}about/`, label: "About" },
  { href: `${base}contact/`, label: "Contact" }
];
---

<header class="sticky top-0 z-40 border-b border-white/10 bg-white/70 backdrop-blur dark:bg-ink-900/80">
  <div class="container-prose flex items-center justify-between py-4">
    <a href={`${base}`} class="text-lg font-bold tracking-tight text-slate-900 dark:text-white">
      NDT<span class="text-accent-500">.</span>
    </a>
    <nav class="hidden items-center gap-6 md:flex">
      {links.map((link) => (
        <a class="text-sm font-semibold text-slate-700 transition hover:text-accent-600 dark:text-slate-200" href={link.href}>
          {link.label}
        </a>
      ))}
      <ThemeToggle />
    </nav>
    <div class="flex items-center gap-3 md:hidden">
      <ThemeToggle />
      <button
        type="button"
        class="rounded-full border border-slate-200/70 bg-white/70 px-3 py-2 text-xs font-semibold text-slate-700 dark:border-white/10 dark:bg-white/10 dark:text-slate-200"
        data-nav-toggle
        aria-expanded="false"
        aria-controls="mobile-nav"
      >
        Menu
      </button>
    </div>
  </div>
  <div class="hidden border-t border-white/10 bg-white/80 px-6 py-4 dark:bg-ink-900/90" id="mobile-nav" data-mobile-nav>
    <div class="flex flex-col gap-3">
      {links.map((link) => (
        <a class="text-sm font-semibold text-slate-700 dark:text-slate-200" href={link.href}>
          {link.label}
        </a>
      ))}
    </div>
  </div>
</header>

<script is:inline>
  const toggle = document.querySelector("[data-nav-toggle]");
  const menu = document.querySelector("[data-mobile-nav]");
  if (toggle && menu) {
    toggle.addEventListener("click", () => {
      const isOpen = toggle.getAttribute("aria-expanded") === "true";
      toggle.setAttribute("aria-expanded", String(!isOpen));
      menu.classList.toggle("hidden", isOpen);
    });
  }
</script>

